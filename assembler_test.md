##this is a markdown file

# Test the assembly tools for wetland dataset

> sources of errors
1. result in a highly non-uniform read coverage across different genomes ()
1. various species within a microbial community often share highly conserved genomic regions.  “interspecies repeats”
1. many bacterial species in a microbial sample are represented by strain mixtures, i.e. multiple related strains with varying abundances

> solutions
1. SPAdes: non-uniform coverage; exSPAnder: dipSPAdes: ; 
1. SPAdes was not designed for metagenomics applications-->metaSPAdes

> state-of-the-art tools

# metaSPAdes
1.  metaSPAdes works across a wide range of coverage depths and attempts to maintain a trade-off between the accuracy and the contiguity of assemblies. Responding to the microdiversity challenge, metaSPAdes focuses on reconstructing a consensus backbone of a strain-mixture, thus ignoring some strain-specific features corresponding to rare strains
To run SPAdes 3.12.0 you need at least one library of the following types:

*support data
    1. Illumina paired-end/high-quality mate-pairs/unpaired reads
    1. IonTorrent paired-end/high-quality mate-pairs/unpaired reads
    1. PacBio CCS reads



**link
http://cab.spbu.ru/files/release3.12.0/manual.html




# IDBA-UD (Peng et al. 2012), 



# Ray-Meta (Boisvert et al. 2012)



# MEGAHIT (Li et al.2015)



#  real datasets using metaQUAST (Mikheenko et al. 2016)


# benchmark parameter, Assembly parameters

1. metaSPAdes from SPAdes v3.10 pre-release package (see “Software Availability” section), MEGAHIT v1.0.6.1, IDBA-UD v1.1.1 and Ray-Meta v2.3.1 have been launched in 16 threads with (mostly) default parameters. 
1. IDBA-UD was launched with read errorcorrection enabled as recommended in the manual for metagenomic data. 
1. Ray-Meta was launched with k-mer size equal to 31. 
1. metaQUAST,  “-m 1000 --scaffolds” :
    1. metaQUAST classifies a position in a scaffold as an intragenomic misassembly if its flanking regions align to non-consecutive regions of the same reference genome and as an intergenomic misassembly if they align to different reference genomes
    
# benchmarking
1. Scaffold length statistics. 
    1. 3KB cutoff statistics*

1. Gene prediction statistics
    1. MetaProdigal v2.6.2 (Hyatt et al. 2012) to predict the complete genes (option -c) 
    
1. Read alignment statistics.
    1.  aligned read-pairs to scaffolds (longer than 1kb) with Bowtie 2 v2.2.4 (Langmead and Salzberg 2012)
    1.  It also shows that only **15%, 11%, 13%, and 2%** of read-pairs in the SOIL dataset align to assemblies generated by
metaSPAdes, MEGAHIT, IDBA-UD and Ray-Meta, respectively, confirming high diversity of this community.
    1.  the potential redundancies 

1. NGA50 statistics (NG50 statistics corrected for assembly errors) ?

1. soil is complex and highly diverse system. 
    1. Only 27.6 Mb (≈13.6%) of the total length of the metaSPAdes scaffolds longer than 1 kb (196 Mb) overlapped with TSLR
contigs, covering just ≈26% of the total length of the TSLR assembly (best result across all assemblers).

# methods section of metaSPAdes
1. Detecting and masking strain variations. 
    1.  “bulges” and “tips” 

1. Analyzing filigree edges in the assembly graph.
    1. , k-mers, vertices

1. Repeat resolution with exSPAnder. 

1. **A new metagenomic decision rule in metaSPAdes.

1.Utilizing strain differences for repeat resolution in metaSPAdes. 



# command example for metaSPAdes
#https://denbi-openstack-metagenomics-workshop.readthedocs.io/en/latest/assembly/metaspades.html
```
cd /vol/spool/workdir/assembly/

qsub -cwd -pe multislot 14 -N metaspades -b y \
/usr/local/lib/SPAdes-3.11.1-Linux/bin/metaspades.py -o metaspades_out --pe1-1 read1.fq --pe1-2 read2.fq

```
    
